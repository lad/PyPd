#N canvas 220 21 1108 707 10;
#X obj 41 156 env~;
#X floatatom 103 114 0 0 0 0 - - -;
#X obj 42 271 t b f;
#X floatatom 42 294 0 0 0 0 - - -;
#X obj 49 349 pack;
#X obj 49 372 route 0 1;
#X obj 49 395 > 55;
#X obj 49 418 sel 1;
#X obj 99 418 sel 1;
#X msg 13 429 1;
#X msg 13 407 0;
#X obj 49 455 print attack;
#X obj 42 326 != 0;
#X obj 573 422 t b f;
#X floatatom 564 448 0 0 0 0 - - -;
#X obj 576 498 pack;
#X obj 576 521 route 0 1;
#X obj 576 559 sel 1;
#X obj 569 476 != 0;
#X obj 607 449 < 45;
#X obj 580 593 timer;
#X obj 662 522 sel 0;
#X obj 644 642 sel 0;
#X obj 594 642 sel 1;
#X obj 580 616 > 1000;
#X text 85 294 state -- 1 if waiting for low threshold \,;
#X text 122 309 0 if we've attained it and now want the;
#X text 125 325 high one.;
#X text 132 371 route the RMS value according to state;
#X text 162 397 if off \, 55 dB means attack. If on \, 45;
#X text 163 418 dB or less means state changes to off.;
#X text 55 250 ATTACK DETECTION;
#X text 589 404 REST DETECTION;
#X text 649 447 Here we always will test RMS against a low value;
#X text 674 464 but as before we route the result according to;
#X text 696 481 our state \, 1 if "resting" \, 0 if not.;
#X text 712 519 regardless of state \, when RMS isn't low;
#X text 734 534 reset the timer;
#X text 751 656 RMS isn't low enough.;
#X text 669 554 If we're not in rest \, and the RMS is low \,;
#X text 692 571 check elapsed time sinse RMS last wasn't low.;
#X text 671 612 If more than 1 second \, report a rest.;
#X text 719 638 If we're at rest \, pop out of it when;
#X text 134 105 note 3.01 dB difference between;
#X text 138 121 peak and RMS amplitudes.;
#X obj 44 30 tbl.ld;
#X obj 296 98 mix4.ld;
#X obj 482 211 gssb.ld;
#X obj 99 395 < 55;
#X obj 234 589 unsig~ 5;
#X obj 161 546 vline~;
#X msg 192 507 0 \, 1000 10;
#X connect 0 0 1 0;
#X connect 0 0 2 0;
#X connect 0 0 13 0;
#X connect 2 0 3 0;
#X connect 2 1 4 1;
#X connect 3 0 12 0;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 5 1 48 0;
#X connect 6 0 7 0;
#X connect 7 0 9 0;
#X connect 7 0 11 0;
#X connect 7 0 51 0;
#X connect 8 0 10 0;
#X connect 9 0 3 0;
#X connect 10 0 3 0;
#X connect 12 0 4 0;
#X connect 13 0 14 0;
#X connect 13 1 19 0;
#X connect 14 0 18 0;
#X connect 15 0 16 0;
#X connect 16 0 17 0;
#X connect 16 1 22 0;
#X connect 17 0 20 1;
#X connect 18 0 15 0;
#X connect 19 0 15 1;
#X connect 19 0 21 0;
#X connect 20 0 24 0;
#X connect 21 0 20 0;
#X connect 24 0 23 0;
#X connect 45 0 0 0;
#X connect 45 0 46 0;
#X connect 45 0 47 0;
#X connect 47 0 46 1;
#X connect 48 0 8 0;
#X connect 49 0 47 2;
#X connect 50 0 49 0;
#X connect 51 0 50 0;
